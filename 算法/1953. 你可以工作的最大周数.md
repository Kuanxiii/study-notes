# [1953. 你可以工作的最大周数](https://leetcode.cn/problems/maximum-number-of-weeks-for-which-you-can-work/description/)

## 说明

```
给你 n 个项目，编号从 0 到 n - 1 。同时给你一个整数数组 milestones ，其中每个 milestones[i] 表示第 i 个项目中的阶段任务数量。

你可以按下面两个规则参与项目中的工作：

每周，你将会完成 某一个 项目中的 恰好一个 阶段任务。你每周都 必须 工作。
在 连续的 两周中，你 不能 参与并完成同一个项目中的两个阶段任务。
一旦所有项目中的全部阶段任务都完成，或者仅剩余一个阶段任务都会导致你违反上面的规则，那么你将 停止工作 。注意，由于这些条件的限制，你可能无法完成所有阶段任务。

返回在不违反上面规则的情况下你 最多 能工作多少周。

 

示例 1：

输入：milestones = [1,2,3]
输出：6
解释：一种可能的情形是：
​​​​- 第 1 周，你参与并完成项目 0 中的一个阶段任务。
- 第 2 周，你参与并完成项目 2 中的一个阶段任务。
- 第 3 周，你参与并完成项目 1 中的一个阶段任务。
- 第 4 周，你参与并完成项目 2 中的一个阶段任务。
- 第 5 周，你参与并完成项目 1 中的一个阶段任务。
- 第 6 周，你参与并完成项目 2 中的一个阶段任务。
总周数是 6 。
示例 2：

输入：milestones = [5,2,1]
输出：7
解释：一种可能的情形是：
- 第 1 周，你参与并完成项目 0 中的一个阶段任务。
- 第 2 周，你参与并完成项目 1 中的一个阶段任务。
- 第 3 周，你参与并完成项目 0 中的一个阶段任务。
- 第 4 周，你参与并完成项目 1 中的一个阶段任务。
- 第 5 周，你参与并完成项目 0 中的一个阶段任务。
- 第 6 周，你参与并完成项目 2 中的一个阶段任务。
- 第 7 周，你参与并完成项目 0 中的一个阶段任务。
总周数是 7 。
注意，你不能在第 8 周参与完成项目 0 中的最后一个阶段任务，因为这会违反规则。
因此，项目 0 中会有一个阶段任务维持未完成状态。
 

提示：

n == milestones.length
1 <= n <= 105
1 <= milestones[i] <= 109
```

## 题解思路

### 数学 + 贪心

- 这道题实际上和[2335. 装满杯子需要的最短总时长](https://blog.csdn.net/Chase_k/article/details/138134827)很类似
- 只是2335数据量比较小，可以用简单模拟的方式解决，本题数据量较大，简单模拟会超时。。
- 思路：
  - 不能两周连续做同一项工作，可以理解成，一个回合是两周，每个回合必须做两个工作项
  - 当有工作阶段数都很平均的时候，一定能做完所有的工作，直接返回总周数即可
  - 不能完成的情况，就是最终仅剩下光秃秃的一根工作条
  - 设最长的工作条长度为`x`（我们设定`x`很大很大，必定会剩下），全部工作阶段总和为`sum`，每次`x-1`的时候都能带走其他的工作条的一段
  - 那么最后剩下的这个工作条最大的操作数就是带走的其他工作条的长度，也就是`sum-x+1`。
  - `+1`是由于可以通过调整先操作`x`还是其他，可以决定最后结束的时候是由其他工作条操作结束，可以最后再回来减一下`x`
  - 那么可以工作的最大周期就是`(sum-x)*2+1`，`*2`是因为每个回合是两周，`+1`是因为最后再回来减一下`x`
  - 我们就可以判定，如果`(sum-x)*2+1>sum`，就直接返回`sum`，否则返回`(sum-x)*2+1`
  - `(sum-x)*2+1>sum`化简一下，可得：`2x <= sum-1`

## Code

### 数学 + 贪心

```java
class Solution {
    public long numberOfWeeks(int[] milestones) {
        int max = 0;
        long sum = 0;
        for(int i = 0; i < milestones.length; i++){
            max = Math.max(milestones[i], max);
            sum += milestones[i];
        }
        if(2 * max <= sum + 1) return sum;
        return (sum - max) * 2 + 1;
    }
}
```

